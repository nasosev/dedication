<!DOCTYPE html>
<html lang="en">

<!--
    ═══════════════════════════════════════════════════════════════════════════
    Temple - A Digital Sacred Space
    ═══════════════════════════════════════════════════════════════════════════

    A space honoring that which cannot be named.

    FEELING:
    Vastness, openness, sacredness, tranquility, reverence.

    ═══════════════════════════════════════════════════════════════════════════
-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>dedication</title>

    <script>
        // Randomly select background tile before page renders
        const tileNumber = Math.random() < 0.5 ? 1 : 2;
        document.documentElement.style.setProperty('--bg-tile', `url('img/tile-${tileNumber}.png')`);
    </script>

    <style>
        /* ═══════════════════════════════════════════════════════════════
           Sacred Configuration - All spatial and visual parameters
           ══════════════════════════════════════════════════════════════ */

        :root {
            /* Background */
            --bg-tile-size: 50%;

            /* Spacing - Outer containers */
            --center-padding-vertical: 140px;
            --center-padding-horizontal: 20px;

            /* Typography - Title */
            --title-size: 60px;
            --title-letter-spacing: 12px;
            --title-margin-top: 120px;
            --title-margin-bottom: 220px;

            /* Typography - Sacred words */
            --words-size: 22px;
            --words-line-height: 3.2;
            --words-letter-spacing: 2px;
            --words-word-spacing: 20px;
            --words-margin-vertical: 100px;

            /* Images - Mandalas */
            --mandala-max-width: 280px;
            --mandala-margin-top: 280px;
            --mandala-margin-bottom: 380px;
            --mandala-fade-inner: 15%;
            --mandala-fade-outer: 85%;

            /* Images - Candles */
            --candle-width: 140px;
            --candles-margin-top: 120px;
            --candles-offset-horizontal: 10px;

            /* Images - Offerings */
            --offering-max-width: 500px;
            --offering-pair-gap: 140px;
            --offering-pair-margin: 240px;
            --offering-border-radius: 12px;

            /* Images - Angels */
            --angel-max-width: 600px;
            --angel-width: 75%;
            --angel-margin: 240px;
            --angel-border-radius: 16px;

            /* Images - Naso photos */
            --naso-photos-max-width: 480px;
            --naso-photos-width: 80%;
            --naso-photos-height: 520px;
            --naso-photos-margin: 240px;
            --naso-photo-opacity-inactive: 0.3;
            --naso-photo-opacity-active: 1;
            --naso-photo-transition: 6s;

            /* Images - Altars */
            --altar-max-width: 800px;
            --altar-width: 80%;
            --altar-margin: 240px;
            --altar-border-radius: 20px;

            /* Sound control */
            --sound-control-bottom: 20px;
            --sound-control-right: 20px;
            --sound-control-size: 18px;
            --sound-control-padding-vertical: 12px;
            --sound-control-padding-horizontal: 18px;
            --sound-control-border: 2px;
            --sound-control-opacity: 0.85;
            --sound-control-opacity-hover: 1;

            /* Footer */
            --footer-margin-top: 40px;
            --footer-padding-bottom: 120px;
            --footer-size: 16px;

            /* Mobile adjustments */
            --mobile-center-padding: 80px 20px;
            --mobile-title-size: 36px;
            --mobile-title-spacing: 6px;
            --mobile-words-size: 11px;
            --mobile-candle-width: 50px;
            --mobile-mandala-max-width: 130px;
            --mobile-spacing-reduced: 200px;
        }

        /* ═══════════════════════════════════════════════════════════════
           Foundation
           ══════════════════════════════════════════════════════════════ */

        body {
            background-image: var(--bg-tile);
            background-repeat: repeat;
            background-size: var(--bg-tile-size);
            color: #ffd87d;
            font-family: Georgia, serif;
            margin: 0;
            padding: 0;
            color-scheme: dark;
        }

        center {
            padding: var(--center-padding-vertical) var(--center-padding-horizontal);
        }

        /* ═══════════════════════════════════════════════════════════════
           Typography
           ══════════════════════════════════════════════════════════════ */

        h1 {
            font-size: var(--title-size);
            font-weight: normal;
            letter-spacing: var(--title-letter-spacing);
            margin: var(--title-margin-top) 0 var(--title-margin-bottom) 0;
            color: #ffffff;
        }

        .words {
            font-size: var(--words-size);
            line-height: var(--words-line-height);
            letter-spacing: var(--words-letter-spacing);
            word-spacing: var(--words-word-spacing);
            margin: var(--words-margin-vertical) 0 var(--words-margin-vertical) 0;
            color: #e8dcc8;
        }

        .mandala {
            max-width: var(--mandala-max-width);
            width: 100%;
            height: auto;
            margin: var(--mandala-margin-top) auto var(--mandala-margin-bottom) auto;
            display: block;
            mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            mask-composite: intersect;
            -webkit-mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            -webkit-mask-composite: source-in;
        }

        /* ═══════════════════════════════════════════════════════════════
           Elemental Qualities - Soft and Luminous
           ══════════════════════════════════════════════════════════════ */

        .earth {
            color: #ffd87d;
            text-shadow: 0 0 16px #ffd87d;
        }

        .water {
            color: #87ceeb;
            text-shadow: 0 0 16px #87ceeb;
        }

        .fire {
            color: #e8755b;
            text-shadow: 0 0 16px #e8755b;
        }

        .air {
            color: #81b29a;
            text-shadow: 0 0 16px #81b29a;
        }

        .space {
            color: #ffffff;
            text-shadow: 0 0 16px #ffffff;
        }

        /* ═══════════════════════════════════════════════════════════════
           Sacred Images
           ══════════════════════════════════════════════════════════════ */

        .candles-container {
            position: relative;
            width: 100%;
            height: 0;
            margin: var(--candles-margin-top) 0 0 0;
        }

        .candles-container picture {
            position: absolute;
        }

        .candles-container picture:first-child {
            left: var(--candles-offset-horizontal);
        }

        .candles-container picture:last-child {
            right: var(--candles-offset-horizontal);
        }

        .candle {
            width: var(--candle-width);
            height: auto;
        }

        .offering-pair {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--offering-pair-gap);
            margin: var(--offering-pair-margin) 0;
        }

        .offering {
            max-width: var(--offering-max-width);
            border-radius: var(--offering-border-radius);
            mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            mask-composite: intersect;
            -webkit-mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            -webkit-mask-composite: source-in;
        }

        .angel {
            max-width: var(--angel-max-width);
            width: var(--angel-width);
            height: auto;
            margin: var(--angel-margin) auto;
            border-radius: var(--angel-border-radius);
            display: block;
            mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            mask-composite: intersect;
            -webkit-mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            -webkit-mask-composite: source-in;
        }

        .naso-photos {
            position: relative;
            max-width: var(--naso-photos-max-width);
            width: var(--naso-photos-width);
            height: var(--naso-photos-height);
            margin: var(--naso-photos-margin) auto;
        }

        .naso-photo {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 100%;
            width: auto;
            height: 100%;
            object-fit: cover;
            margin: 0;
            opacity: var(--naso-photo-opacity-inactive);
            transition: opacity var(--naso-photo-transition) ease-in-out;
            mix-blend-mode: lighten;
        }

        .naso-photo.active {
            opacity: var(--naso-photo-opacity-active);
        }

        .altar {
            max-width: var(--altar-max-width);
            width: var(--altar-width);
            height: auto;
            margin: var(--altar-margin) auto;
            border-radius: var(--altar-border-radius);
            display: block;
            mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            mask-composite: intersect;
            -webkit-mask-image: linear-gradient(to bottom,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%),
                linear-gradient(to right,
                    transparent 0%,
                    black var(--mandala-fade-inner),
                    black var(--mandala-fade-outer),
                    transparent 100%);
            -webkit-mask-composite: source-in;
        }

        .altar:last-of-type {
            margin-bottom: var(--altar-margin);
        }

        /* ═══════════════════════════════════════════════════════════════
           Footer
           ══════════════════════════════════════════════════════════════ */

        a {
            color: #ffffff;
            text-decoration: none;
        }

        .footer {
            margin-top: var(--footer-margin-top);
            padding-bottom: var(--footer-padding-bottom);
            font-size: var(--footer-size);
        }

        /* ═══════════════════════════════════════════════════════════════
           Sound Control
           ══════════════════════════════════════════════════════════════ */

        #sound-control {
            position: fixed;
            bottom: var(--sound-control-bottom);
            right: var(--sound-control-right);
            font-family: Georgia, serif;
            font-size: var(--sound-control-size);
            color: #ffd87d;
            cursor: pointer;
            opacity: var(--sound-control-opacity);
            z-index: 100;
            padding: var(--sound-control-padding-vertical) var(--sound-control-padding-horizontal);
            border: var(--sound-control-border) solid #ffd87d;
            background: none;
            box-shadow: 0 0 20px rgba(255, 215, 125, 0.3);
        }

        #sound-control:hover {
            opacity: var(--sound-control-opacity-hover);
            box-shadow: 0 0 30px rgba(255, 215, 125, 0.5);
        }

        /* ═══════════════════════════════════════════════════════════════
           Mobile Responsive Design
           ══════════════════════════════════════════════════════════════ */

        @media (max-width: 768px) {

            html,
            body {
                overflow-x: hidden;
                width: 100%;
                max-width: 100vw;
            }

            center {
                padding: var(--mobile-center-padding);
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            h1 {
                font-size: var(--mobile-title-size);
                letter-spacing: var(--mobile-title-spacing);
                margin: 100px 0 140px 0;
            }

            .words {
                font-size: var(--mobile-words-size);
                line-height: 2.5;
                letter-spacing: 0.5px;
                word-spacing: 10px;
                margin: 100px 0;
            }

            .words br {
                display: block;
                content: "";
                margin-top: 20px;
            }

            .candles-container {
                margin: 100px 0 0 0;
            }

            .candles-container picture:first-child {
                left: -20px;
            }

            .candles-container picture:last-child {
                right: -20px;
            }

            .candle {
                width: var(--mobile-candle-width);
            }

            .mandala {
                max-width: var(--mobile-mandala-max-width);
                margin: 180px auto 220px auto;
            }

            .offering-pair {
                gap: 100px;
                margin: var(--mobile-spacing-reduced) 0;
            }

            .offering {
                max-width: 100%;
            }

            .angel {
                max-width: 100%;
                width: 100%;
                margin: var(--mobile-spacing-reduced) auto;
            }

            .naso-photos {
                max-width: 100%;
                width: 90%;
                height: 400px;
                margin: var(--mobile-spacing-reduced) auto;
            }

            .naso-photo {
                max-width: 100%;
            }

            .altar {
                max-width: 100%;
                width: 100%;
                margin: var(--mobile-spacing-reduced) auto;
            }

            .altar:last-of-type {
                margin-bottom: var(--mobile-spacing-reduced);
            }

            .footer {
                margin-top: 50px;
                padding-bottom: 140px;
                font-size: 14px;
            }

            #sound-control {
                bottom: 15px;
                right: 15px;
                font-size: 16px;
                padding: 10px 14px;
            }
        }
    </style>
</head>

<body>
    <!-- Sound Control -->
    <div id="sound-control">sound: on</div>

    <center>
        <!-- ═══════════════════════════════════════════════════════════
             The Temple
             ══════════════════════════════════════════════════════════ -->

        <h1>Dedication</h1>

        <div class="candles-container">
            <picture>
                <source srcset="anim/honey-candle-1.webp" type="image/webp">
                <img class="candle" src="anim/honey-candle-1.gif" alt="Candle">
            </picture>
            <picture>
                <source srcset="anim/honey-candle-2.webp" type="image/webp">
                <img class="candle" src="anim/honey-candle-2.gif" alt="Candle">
            </picture>
        </div>

        <!-- Sacred Qualities Across Five Elements -->
        <div class="words">
            <span class="earth word">noble</span>
            <span class="water word">gentle</span>
            <span class="fire word">magical</span>
            <span class="air word">graceful</span>
            <span class="space word">open</span><br>

            <span class="earth word">nourishing</span>
            <span class="water word">pure</span>
            <span class="fire word">luminous</span>
            <span class="air word">guiding</span>
            <span class="space word">clear</span><br>

            <span class="earth word">protecting</span>
            <span class="water word">caring</span>
            <span class="fire word">blessing</span>
            <span class="air word">freeing</span>
            <span class="space word">healing</span><br>

            <span class="earth word">ancient</span>
            <span class="water word">loving</span>
            <span class="fire word">sacred</span>
            <span class="air word">teaching</span>
            <span class="space word">true</span>
        </div>

        <img class="mandala" src="img/mandalas/mandala-1.png" alt="Mandala">

        <!-- Offerings -->
        <video class="altar" autoplay loop muted playsinline>
            <source src="img/alter-slow.mp4" type="video/mp4">
        </video>

        <img class="mandala" src="img/mandalas/mandala-2.png" alt="Mandala">

        <img class="angel" src="img/angel-1.png" alt="Angel">

        <img class="mandala" src="img/mandalas/mandala-3.png" alt="Mandala">

        <img class="angel" src="img/angel-2.png" alt="Angel">

        <img class="mandala" src="img/mandalas/mandala-4.png" alt="Mandala">

        <div class="naso-photos">
            <img class="angel naso-photo" src="img/temple-naso.jpg" alt="Naso at Temple">
            <img class="angel naso-photo" src="img/forest-naso.jpg" alt="Naso in Forest">
            <img class="angel naso-photo" src="img/candle-naso.jpg" alt="Naso with Candle">
        </div>

        <img class="mandala" src="img/mandalas/mandala-5.png" alt="Mandala">

        <div class="footer">
            <a href="https://nilradical.net">nilradical.net</a>
        </div>
    </center>

    <!-- Sacred Sound -->
    <audio id="om" loop>
        <source src="om.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Sound Control - Play/Pause Toggle
        const soundControl = document.getElementById('sound-control');
        const om = document.getElementById('om');
        let isPlaying = false;

        soundControl.addEventListener('click', function () {
            if (isPlaying) {
                om.pause();
                isPlaying = false;
                soundControl.textContent = 'sound: off';
            } else {
                om.play().then(() => {
                    isPlaying = true;
                    soundControl.textContent = 'sound: on';
                }).catch(err => {
                    console.log('Playback error:', err);
                });
            }
        });

        // Try to autoplay (will work on desktop, blocked on mobile)
        om.play().then(() => {
            isPlaying = true;
            soundControl.textContent = 'sound: on';
        }).catch(err => {
            console.log('Autoplay blocked - click sound control to play');
            isPlaying = false;
            soundControl.textContent = 'sound: off';
        });
    </script>

    <script src="breath.js"></script>

    <script>
        // Naso Photo Morphing - Slow crossfade between images
        const nasoPhotos = document.querySelectorAll('.naso-photo');
        let currentPhotoIndex = 0;

        // Show first photo initially
        if (nasoPhotos.length > 0) {
            nasoPhotos[0].classList.add('active');
        }

        function morphPhotos() {
            if (nasoPhotos.length <= 1) return;

            // Fade out current photo
            nasoPhotos[currentPhotoIndex].classList.remove('active');

            // Move to next photo
            currentPhotoIndex = (currentPhotoIndex + 1) % nasoPhotos.length;

            // Fade in next photo
            nasoPhotos[currentPhotoIndex].classList.add('active');
        }

        // Morph every 28 seconds (slow, reverent pace)
        setInterval(morphPhotos, 28000);
    </script>
</body>

</html>